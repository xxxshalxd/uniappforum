"use strict";const e=require("../../libs/util/emitter.js"),t=require("../../../../common/vendor.js"),o={name:"u-input",emits:["update:modelValue","input","change","confirm","clear","blur","focus","click","touchstart"],mixins:[e.Emitter],props:{value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},inputAlign:{type:String,default:""},placeholder:{type:String,default:"请输入内容"},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},placeholderStyle:{type:String,default:"color: #c0c4cc;"},confirmType:{type:String,default:"done"},customStyle:{type:Object,default:()=>({})},fixed:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},passwordIcon:{type:Boolean,default:!0},border:{type:Boolean,default:!1},borderColor:{type:String,default:"#dcdfe6"},autoHeight:{type:Boolean,default:!0},selectOpen:{type:Boolean,default:!1},height:{type:[Number,String],default:""},clearable:{type:[Boolean,String]},cursorSpacing:{type:[Number,String],default:0},selectionStart:{type:[Number,String],default:-1},selectionEnd:{type:[Number,String],default:-1},trim:{type:Boolean,default:!0},showConfirmbar:{type:Boolean,default:!0},adjustPosition:{type:Boolean,default:!0},backgroundColor:{type:String},padding:{type:String}},data:()=>({defaultValue:"",inputHeight:70,textareaHeight:100,validateState:!1,focused:!1,showPassword:!1,lastValue:"",uForm:{inputAlign:"",clearable:""},showCover:!1}),watch:{valueCom(e,t){this.defaultValue=e,e!=t&&"select"==this.type&&this.handleInput({detail:{value:e}})},defaultValue(e,t){e&&e.length>this.maxlength&&setTimeout((()=>{e=e.substring(0,this.maxlength),this.handleInput({detail:{value:e}})}),0)}},computed:{valueCom(){return this.modelValue},inputAlignCom(){return this.inputAlign||this.uForm.inputAlign||"left"},clearableCom(){return"boolean"==typeof this.clearable?this.clearable:"boolean"!=typeof this.uForm.clearable||this.uForm.clearable},inputMaxlength(){return Number(this.maxlength)},getStyle(){let e={};return e.minHeight=this.height?this.height+"rpx":"textarea"==this.type?this.textareaHeight+"rpx":this.inputHeight+"rpx",e=Object.assign(e,this.customStyle),e},getCursorSpacing(){return Number(this.cursorSpacing)},uSelectionStart(){return String(this.selectionStart)},uSelectionEnd(){return String(this.selectionEnd)}},created(){this.defaultValue=this.valueCom},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uForm).map((t=>{this.uForm[t]=e[t]}))},methods:{handleInput(e){let t=e.detail.value;this.trim&&(t=this.$u.trim(t)),this.$emit("input",t),this.$emit("update:modelValue",t),this.defaultValue=t,setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",t)}),40)},handleBlur(e){setTimeout((()=>{this.focused=!1}),100);let t=e.detail.value;this.$emit("blur",t),setTimeout((()=>{this.dispatch("u-form-item","onFieldBlur",t)}),40)},onFormItemError(e){this.validateState=e},onFocus(e){this.focused=!0,this.$emit("focus")},onConfirm(e){this.$emit("confirm",e.detail.value)},onClear(e){this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},inputClick(){this.$emit("click")}}};if(!Array){t.resolveComponent("u-icon")()}Math;const l=t._export_sfc(o,[["render",function(e,o,l,a,i,r){return t.e({a:"textarea"==l.type},"textarea"==l.type?{b:t.s(r.getStyle),c:i.defaultValue,d:l.placeholder,e:l.placeholderStyle,f:l.disabled,g:l.fixed,h:l.focus,i:-1,j:l.autoHeight,k:r.uSelectionEnd,l:r.uSelectionStart,m:r.getCursorSpacing,n:l.showConfirmbar,o:l.adjustPosition,p:t.o(((...e)=>r.handleInput&&r.handleInput(...e))),q:t.o(((...e)=>r.handleBlur&&r.handleBlur(...e))),r:t.o(((...e)=>r.onFocus&&r.onFocus(...e))),s:t.o(((...e)=>r.onConfirm&&r.onConfirm(...e)))}:{t:t.n("u-input__"+l.type),v:"password"==l.type?"text":l.type,w:t.s(r.getStyle),x:i.defaultValue,y:"password"==l.type&&!i.showPassword,z:l.placeholder,A:l.placeholderStyle,B:l.disabled||"select"===l.type&&!i.showCover,C:l.focus,D:l.confirmType,E:r.getCursorSpacing,F:r.uSelectionEnd,G:r.uSelectionStart,H:l.showConfirmbar,I:l.adjustPosition,J:t.o(((...e)=>r.onFocus&&r.onFocus(...e))),K:t.o(((...e)=>r.handleBlur&&r.handleBlur(...e))),L:t.o(((...e)=>r.handleInput&&r.handleInput(...e))),M:t.o(((...e)=>r.onConfirm&&r.onConfirm(...e)))},{N:"select"===l.type&&i.showCover},"select"===l.type&&i.showCover?{O:t.o(((...e)=>r.inputClick&&r.inputClick(...e)))}:{},{P:r.clearableCom&&""!=r.valueCom&&i.focused},r.clearableCom&&""!=r.valueCom&&i.focused?{Q:t.p({size:"32",name:"close-circle-fill",color:"#c0c4cc"}),R:t.o(((...e)=>r.onClear&&r.onClear(...e)))}:{},{S:l.passwordIcon&&"password"==l.type},l.passwordIcon&&"password"==l.type?{T:t.o((e=>i.showPassword=!i.showPassword)),U:t.p({size:"32",name:i.showPassword?"eye-fill":"eye",color:"#c0c4cc"})}:{},{V:"select"==l.type},"select"==l.type?{W:t.p({name:"arrow-down-fill",size:"26",color:"#c0c4cc"}),X:l.selectOpen?1:""}:{},{Y:l.border?1:"",Z:i.validateState?1:"",aa:l.padding?l.padding:`0 ${l.border?20:0}rpx`,ab:l.borderColor,ac:r.inputAlignCom,ad:l.backgroundColor,ae:t.o(((...e)=>r.inputClick&&r.inputClick(...e)))})}],["__scopeId","data-v-4baaed07"]]);wx.createComponent(l);
